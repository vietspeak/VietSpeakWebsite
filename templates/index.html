<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Jost&display=swap"
      rel="stylesheet"
    />

    <title>Home - VietSpeak</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="main m-3">
            <header>
              <h2 class="title">VietSpeak Bot</h2>
            </header>
            <div class="row my-5">
              <div class="col"></div>
              <div class="col">
                <form id="login-form" class="m-3">
                  <input
                    type="text"
                    class="form-control my-3"
                    id="username"
                    placeholder="Username"
                  />

                  <input
                    type="password"
                    class="form-control"
                    id="password"
                    placeholder="Password"
                  />
                  <div class="d-flex flex-column my-3">
                    <button
                      type="button"
                      style="background-color: #8500ff; border: none"
                      class="btn btn-primary px-5"
                      id="login"
                    >
                      Login
                    </button>
                    <br />
                    <button
                      type="button"
                      style="background-color: #ff00a5; border: none"
                      class="btn btn-primary px-5"
                      id="register"
                    >
                      Register
                    </button>

                    <small id="message" class="form-text text-muted"></small>
                  </div>
                </form>
              </div>
              <div class="col"></div>
            </div>

            <div class="content">
              <p>
                VietSpeak là một cộng đồng luyện nói tiếng Anh phi lợi nhuận
                dành cho người Việt.
              </p>
              <p>
                Hoạt động của VietSpeak rất đơn giản, ai cũng có thể theo được:
              </p>
              <ul>
                <li>
                  Bước 1: Chọn một trong 4 mức độ luyện tập (từ đọc một từ đơn
                  lẻ đến đọc một đoạn phát biểu dài). Mỗi mức độ sẽ có phần bài
                  đọc và bài nghe do người bản xứ nói. Từ hai phần này, các bạn
                  có thể tự nghe, tự sửa lỗi, tự tập.
                </li>
                <li>
                  Bước 2: Nộp bài thu âm và nhận xét cho hai người bạn kề trên
                  trong 10 ngày.
                </li>
                <li>
                  Bước 3: Các bạn sẽ nhận được nhận xét từ phần mềm VietSpeak
                  Bot và ít nhất hai người bạn khác.
                </li>
              </ul>
              <p>
                Để đảm bảo chất lượng học tập, các bạn không nộp bài thu âm hoặc
                không nhận xét chất lượng cho các thành viên khác trong thời hạn
                10 ngày sẽ bị loại khỏi nhóm.
              </p>
              <p>
                Ngoài ra, nhiều thành viên thường xuyên tổ chức các buổi giao
                lưu, chia sẻ kinh nghiệm nghe-nói-đọc-viết và các buổi nói
                chuyện chỉ dùng tiếng Anh giúp các bạn nâng cao khả năng nghe và
                khả năng phản xạ khi nói. Các thành viên VietSpeak đa số đều có
                tinh thần hiếu học, sẵn sàng chia sẻ kiến thức và giúp đỡ nhau
                trong việc học tập tiếng Anh.
              </p>
              <p>
                Nếu bạn thấy nhóm sẽ hữu ích cho bản thân và quyết tâm theo học
                cùng nhóm thì hãy đăng kí tại
                <a href="https://register.vietspeak.org"
                  >https://register.vietspeak.org</a
                >
              </p>
              <p>
                Sau khi đăng kí xong, các bạn có thể kiểm tra trạng thái xét
                duyệt đơn đăng kí của mình ở
                <a href="https://status.vietspeak.org/"
                  >https://status.vietspeak.org/</a
                >
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <script type="module">
      async function postData(url = "", data = {}) {
        let formData = new FormData();
        for (const [key, value] of Object.entries(data))
          formData.append(key, value);
        const response = await fetch(url, {
          method: "POST",
          body: formData,
        });
        return response.json();
      }

      function clientValidation(usernameInput, passwordInput) {
        if (usernameInput.length <= 0 || passwordInput.length <= 0) {
          alert("You should provide your username and password");
          return false;
        }
        if (usernameInput.length > 32) {
          alert("Your username should be less than 32 characters");
          return false;
        }
        return true;
      }

      document.getElementById("register").onclick = function () {
        let username = document.getElementById("username").value;
        let password = document.getElementById("password").value;
        if (clientValidation(username, password)) {
          postData("/register", {
            username: username,
            password: password,
          }).then((data) => {
            if (data.status) window.location.href = "./tasks";
            document.getElementById("message").innerText =
              "Your username has been taken by someone else.";
          });
        }
      };

      document.getElementById("login").onclick = function () {
        let username = document.getElementById("username").value;
        let password = document.getElementById("password").value;
        if (clientValidation(username, password)) {
          postData("/login", { username: username, password: password }).then(
            (data) => {
              if (data.status) window.location.href = "./tasks";
              else
                document.getElementById("message").innerText =
                  "Your username or password is incorrect.";
            }
          );
        }
      };
    </script>
  </body>
  <style>
    .title {
      font-family: "Jost", sans-serif;
      font-weight: 600;
      font-size: 4rem;
      color: #6f3aeb;
      text-align: center;
    }
    p {
      font-family: "Jost", sans-serif;
    }

    #login:hover,
    #register:hover {
      transition: 1s;
      transform: scale(1.1);
    }
    .content {
      max-width: 100%;
      width: 500px;
      margin: 0 auto;
    }
  </style>
</html>
